{"ast":null,"code":"import{resize,frame,cancelFrame,frameData}from'motion-dom';import{noop}from'motion-utils';import{createScrollInfo}from'./info.mjs';import{createOnScrollHandler}from'./on-scroll-handler.mjs';const scrollListeners=new WeakMap();const resizeListeners=new WeakMap();const onScrollHandlers=new WeakMap();const getEventTarget=element=>element===document.scrollingElement?window:element;function scrollInfo(onScroll){let{container=document.scrollingElement,...options}=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!container)return noop;let containerHandlers=onScrollHandlers.get(container);/**\n     * Get the onScroll handlers for this container.\n     * If one isn't found, create a new one.\n     */if(!containerHandlers){containerHandlers=new Set();onScrollHandlers.set(container,containerHandlers);}/**\n     * Create a new onScroll handler for the provided callback.\n     */const info=createScrollInfo();const containerHandler=createOnScrollHandler(container,onScroll,info,options);containerHandlers.add(containerHandler);/**\n     * Check if there's a scroll event listener for this container.\n     * If not, create one.\n     */if(!scrollListeners.has(container)){const measureAll=()=>{for(const handler of containerHandlers){handler.measure(frameData.timestamp);}frame.preUpdate(notifyAll);};const notifyAll=()=>{for(const handler of containerHandlers){handler.notify();}};const listener=()=>frame.read(measureAll);scrollListeners.set(container,listener);const target=getEventTarget(container);window.addEventListener(\"resize\",listener,{passive:true});if(container!==document.documentElement){resizeListeners.set(container,resize(container,listener));}target.addEventListener(\"scroll\",listener,{passive:true});listener();}const listener=scrollListeners.get(container);frame.read(listener,false,true);return()=>{cancelFrame(listener);/**\n         * Check if we even have any handlers for this container.\n         */const currentHandlers=onScrollHandlers.get(container);if(!currentHandlers)return;currentHandlers.delete(containerHandler);if(currentHandlers.size)return;/**\n         * If no more handlers, remove the scroll listener too.\n         */const scrollListener=scrollListeners.get(container);scrollListeners.delete(container);if(scrollListener){var _resizeListeners$get;getEventTarget(container).removeEventListener(\"scroll\",scrollListener);(_resizeListeners$get=resizeListeners.get(container))===null||_resizeListeners$get===void 0?void 0:_resizeListeners$get();window.removeEventListener(\"resize\",scrollListener);}};}export{scrollInfo};","map":{"version":3,"names":["resize","frame","cancelFrame","frameData","noop","createScrollInfo","createOnScrollHandler","scrollListeners","WeakMap","resizeListeners","onScrollHandlers","getEventTarget","element","document","scrollingElement","window","scrollInfo","onScroll","container","options","arguments","length","undefined","containerHandlers","get","Set","set","info","containerHandler","add","has","measureAll","handler","measure","timestamp","preUpdate","notifyAll","notify","listener","read","target","addEventListener","passive","documentElement","currentHandlers","delete","size","scrollListener","_resizeListeners$get","removeEventListener"],"sources":["C:/Users/oscar/Downloads/project (5)/src/node_modules/framer-motion/dist/es/render/dom/scroll/track.mjs"],"sourcesContent":["import { resize, frame, cancelFrame, frameData } from 'motion-dom';\nimport { noop } from 'motion-utils';\nimport { createScrollInfo } from './info.mjs';\nimport { createOnScrollHandler } from './on-scroll-handler.mjs';\n\nconst scrollListeners = new WeakMap();\nconst resizeListeners = new WeakMap();\nconst onScrollHandlers = new WeakMap();\nconst getEventTarget = (element) => element === document.scrollingElement ? window : element;\nfunction scrollInfo(onScroll, { container = document.scrollingElement, ...options } = {}) {\n    if (!container)\n        return noop;\n    let containerHandlers = onScrollHandlers.get(container);\n    /**\n     * Get the onScroll handlers for this container.\n     * If one isn't found, create a new one.\n     */\n    if (!containerHandlers) {\n        containerHandlers = new Set();\n        onScrollHandlers.set(container, containerHandlers);\n    }\n    /**\n     * Create a new onScroll handler for the provided callback.\n     */\n    const info = createScrollInfo();\n    const containerHandler = createOnScrollHandler(container, onScroll, info, options);\n    containerHandlers.add(containerHandler);\n    /**\n     * Check if there's a scroll event listener for this container.\n     * If not, create one.\n     */\n    if (!scrollListeners.has(container)) {\n        const measureAll = () => {\n            for (const handler of containerHandlers) {\n                handler.measure(frameData.timestamp);\n            }\n            frame.preUpdate(notifyAll);\n        };\n        const notifyAll = () => {\n            for (const handler of containerHandlers) {\n                handler.notify();\n            }\n        };\n        const listener = () => frame.read(measureAll);\n        scrollListeners.set(container, listener);\n        const target = getEventTarget(container);\n        window.addEventListener(\"resize\", listener, { passive: true });\n        if (container !== document.documentElement) {\n            resizeListeners.set(container, resize(container, listener));\n        }\n        target.addEventListener(\"scroll\", listener, { passive: true });\n        listener();\n    }\n    const listener = scrollListeners.get(container);\n    frame.read(listener, false, true);\n    return () => {\n        cancelFrame(listener);\n        /**\n         * Check if we even have any handlers for this container.\n         */\n        const currentHandlers = onScrollHandlers.get(container);\n        if (!currentHandlers)\n            return;\n        currentHandlers.delete(containerHandler);\n        if (currentHandlers.size)\n            return;\n        /**\n         * If no more handlers, remove the scroll listener too.\n         */\n        const scrollListener = scrollListeners.get(container);\n        scrollListeners.delete(container);\n        if (scrollListener) {\n            getEventTarget(container).removeEventListener(\"scroll\", scrollListener);\n            resizeListeners.get(container)?.();\n            window.removeEventListener(\"resize\", scrollListener);\n        }\n    };\n}\n\nexport { scrollInfo };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}